---
title: 艺术二维码生成
date: 2025-09-10T10:00:00+08:00
slug: artistic-qr-code-generation
authors: ["Edom"]
summary: 二维码生成
tags: [Mac, 工具, 效率, 程序员]
categories: [工具分享, Mac]
toc: true
---
首先我们需要快速了解二维码识别的原理。

二维码图片主要包含定位图案（图上的三个大“回”形方框）、中间的点阵数据图案。二维码的扫描过程看上去也很复杂，我看了一下网上的介绍，粗略地将其解码过程总结为：

根据三个定位图案检测以及“摆正”二维码。
将二维码区域转换为灰度图，切分成不重叠的区块，每个区块内单独计算得到一个阈值，高于阈值的为1，小于阈值的为0。
根据一定的规则，从读取的一串010110...数据流中解码得到信息。二维码的编码有一定的冗余，数据流中偶然几位的0，1被搞混也不会影响解码。
因此，虽然上面这些艺术画二维码看上去不再是黑白格子矩阵，但只要它：

依然包含关键的三个定位图案。
定位图案包围的数据区域有明显的亮暗关系变化，可以被解码为0，1数据流。
数据流中被扰乱的0，1比特还没有那么多，还能被冗余信息恢复。
那么它就是一个二维码。

总结一下：只要二维码的亮暗关系还没被破坏得太多，那就还是一个可用的二维码？

好的，现在我们已经知道关键点是保留亮暗关系了，接着一个问题就是，怎么才能制作满足这种亮暗关系的二维码图片？

一、安装 QR Toolkit 插件
QR Toolkit 网页版： https://qrcode.antfu.me/

QR Toolkit 插件 git 网址： https://github.com/antfu/sd-webui-qrcode-toolkit

插件功能介绍：Refining AI Generated QR Code (antfu.me)

QR Toolkit 是一个 WebUI 插件，也有网页版，功能非常全面，可以生成多种样式的美化 QR 码，它具体安装步骤如下：
https://image.uisdc.com/wp-content/uploads/2023/07/uisdc-hs-20230718-3.jpg

进入 WebUI 后打开「扩展」界面，点击「从网址安装」
复制插件的 git 网址： https://github.com/antfu/sd-webui-qrcode-toolkit.git ，粘贴到“扩展的 git 仓库网址”一栏。
点击安装，等待安装完成，然后重启 WebUI。
保姆级教程！如何用AI快速生成超好看的艺术二维码？

二、生成二维码
安装完成后，点击进入 QR Toolkit 界面，开始生成二维码。二维码的样式和细节直接影响最终图像的生成效果，设置正确的参数有助于生成更好用的二维码。QR Toolkit 的操作步骤及相关参数介绍如下，你也可以直接使用图中我的参数作为参考。设置完毕后，点击「Download」将二维码保存到本地。

保姆级教程！如何用AI快速生成超好看的艺术二维码？

填写链接：将你想制作成二维码的链接填入文本框，链接不要太长。太长的话建议使用工具转换为短链接： 百度短网址 (dwz.cn)
容错率（Error Correction）：二维码的抗损毁能力，可以让二维码在部分区域损毁的情况下，也可以被识别。数值越高，抗损毁能力越强，但也有更多的信息冗余。为了保证二维码变成图像后依旧被识别，这里建议选择 Q 或 H 两档中的一个。
Boost ECC：直接勾选
遮罩图案（Mask Pattern）：二维码样式，可以逐个对比查看，选择黑白点分布比较均匀的样式。 不要选择一块特别密集一块特别稀疏的样式，会导致生成的图像构图很奇怪。
旋转（Rotate）：对二维码进行旋转。可以将二维码中 3 个非常显眼的定位方块旋转调整到画面下方，在生成图想时更容易被隐藏起来。
风格（style）：调整二维码风格细节，点阵由方方正正变成更圆润连贯的外形，建议选择第二种风格。
Markers/Sub Markers：调整点阵细节，还是以"黑白分布均匀"为基准进行微调。其中 Marker Inner 决定 3 个非常显眼的定位方块的外形，最好选择第一种，保证生成的图像在微信中能被直接识别
Margin（白边）：在二维码边缘添加噪点，让二维码的形式感弱化。推荐设置 3-5，太高在微信中会难以识别。
Effect(特效)：有 Crystallize （晶格化）和 Liquidify（液化）两种特效，可以修改黑白方块之间的分明的界限，可以让生成的图像更自然，熟练后可以尝试使用。
三、安装 After Detailer 插件
插件 git 网址： https://github.com/Bing-su/adetailer

这是一款非常强大的、专门针对人脸进行修复的插件，可以解决生成全身图时人物面部扭曲/模糊的问题，安装方式和前面一样。

保姆级教程！如何用AI快速生成超好看的艺术二维码？

插件 After Detailer 界面

四、安装 QR Code Monster 模型
模型下载地址： https://huggingface.co/monster-labs/control_v1p_sd15_qrcode_monster/tree/main （附件有打包资源）

QR Code Monster 是专门为生成艺术二维码而训练的一款 Controlnet 模型，下载完成后，将模型复制到 WebUI 根目录的 Extensions → Controlnet → models 文件夹内，然后重启 WebUI。

保姆级教程！如何用AI快速生成超好看的艺术二维码？

五、设置 WebUI 参数
上面的内容都准备好之后，就可以开始生成操作了，下面是我使用的参数，大家可以作为参考

大模型：SHMILY 古典炫彩_v1.0（大模型选一个自己常用的就行，建议优先用插画风大模型，更方便和二维码融合，等熟练之后再用写实风格模型或者与 lora 模型结合使用）
正面提示词：(masterpiece, top quality, best quality, 1 girl, full body, flowers（画面中有建筑、街道这些元素成功率会更高）
负面提示词：((nsfw)), (worst quality, low quality:2) , ng_deepnegative_v1_75t, EasyNegative, badhandv4 （文末可下载 embedding 模型打包资源）
步数：50
采样器：DPM++ 2M SDE Karras
CFG scale: 7
尺寸：512*512 px
开启高清修复（Hires.fix）：参数默认即可
保姆级教程！如何用AI快速生成超好看的艺术二维码？

然后启用 After Detailer 插件，模型选择 face_yolov8n.pt 或者 mediapipe_face_full，在「蒙版处理」中将第三项的数值设置为 -4。

保姆级教程！如何用AI快速生成超好看的艺术二维码？

六、设置 Controlnet 参数
启用 Controlnet 插件，上传我们准备好的二维码，勾选完美像素模式，其他参数设置如下：

预处理器：无 / 模型：control_v1p_sd15_qrcode_monster
控制权重：1.0 - 1.75（数值越高，二维码的影响越强，识别成功率越高）
引导接入时机：0 - 0.1
引导终止时机：0.8-0.9
控制模式：均衡
缩放模式：缩放后填充空白
保姆级教程！如何用AI快速生成超好看的艺术二维码？

七、生成图像
参数都设置好之后，就可以点击「生成」按钮进行抽卡了。图像生成后，可以然后在手机上检测二维码能否被直接识别；如果不能，就灵活调整控制权重、引导接入/终止时机的 3 项数值，同一个数值可以多生成几张，确定没有可用图像后，再调整参数。

（图像生成后，原始图像全尺寸较大，记得缩小至原来的一半或者三份之一，在手机上直接识别成功的概率会更高）

最后结果：

以上就是利用 Stable Diffusion WebUI 配合 Controlnet 新模型 QR Code Monster，制作无痕 艺术二维码的全部过程了，希望对大家有所帮助。